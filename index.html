<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Totem Autoatendimento</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; background: #f4f4f4; }
        .menu { width: 60%; padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; overflow-y: auto; }
        .item { background: white; border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: 0.2s; }
        .item:active { transform: scale(0.95); }
        .carrinho { width: 40%; background: #fff; border-left: 3px solid #009ee3; padding: 20px; display: flex; flex-direction: column; }
        .total-box { font-size: 24px; font-weight: bold; margin-bottom: 20px; color: #333; }
        .btn-pgto { padding: 15px; margin-bottom: 10px; border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-cartao { background-color: #009ee3; }
        .btn-pix { background-color: #00a152; }
        #area-pix { margin-top: 20px; text-align: center; }
        #qrcode-img { width: 200px; height: 200px; display: none; margin: 0 auto; }
    </style>
</head>
<body>

<div class="menu">
    <div class="item" onclick="add('X-Burguer', 20)">üçî X-Burguer<br>R$ 20,00</div>
    <div class="item" onclick="add('X-Salada', 22)">ü•ó X-Salada<br>R$ 22,00</div>
    <div class="item" onclick="add('X-Bacon', 25)">ü•ì X-Bacon<br>R$ 25,00</div>
    <div class="item" onclick="add('Especial', 30)">üëë Especial<br>R$ 30,00</div>
    <div class="item" onclick="add('Coca-Cola', 7)">ü•§ Coca-Cola<br>R$ 7,00</div>
    <div class="item" onclick="add('Suco', 10)">üçä Suco Nat.<br>R$ 10,00</div>
    <div class="item" onclick="add('√Ågua', 5)">üíß √Ågua<br>R$ 5,00</div>
    <div class="item" onclick="add('Cerveja', 12)">üç∫ Cerveja<br>R$ 12,00</div>
</div>

<div class="carrinho">
    <h2>üõí Seu Pedido</h2>
    <div id="lista" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;"></div>
    <div class="total-box">Total: R$ <span id="total">0.00</span></div>
    
    <button class="btn-pgto btn-cartao" onclick="pagarCartao()">üí≥ PAGAR COM CART√ÉO</button>
    <button class="btn-pgto btn-pix" onclick="pagarPix()">‚ö° PAGAR COM PIX</button>

    <div id="area-pix">
        <p id="msg-pix"></p>
        <img id="qrcode-img" src="" alt="QR Code Pix">
        <p id="copia-e-cola" style="font-size: 10px; word-break: break-all;"></p>
    </div>
</div>

<script>
    let total = 0;
    let itens = [];
    const ACCESS_TOKEN = "COLOQUE_SEU_ACCESS_TOKEN_AQUI"; // Pegue no painel de dev do Mercado Pago

    function add(nome, preco) {
        total += preco;
        itens.push(nome);
        document.getElementById('total').innerText = total.toFixed(2);
        document.getElementById('lista').innerHTML += `<div>${nome} - R$ ${preco.toFixed(2)}</div>`;
    }

    // FUN√á√ÉO 1: CART√ÉO (MAQUININHA)
    function pagarCartao() {
        if(total === 0) return alert("Carrinho vazio!");
        const valor = total.toFixed(2);
        // O link abaixo "chama" o app do Mercado Pago no celular
        const url = `mp-point://pay?amount=${valor}&description=Pedido_Totem&editable_amount=false`;
        window.location.href = url;
    }

    // FUN√á√ÉO 2: PIX (GERA NA TELA)
    async function pagarPix() {
        if(total === 0) return alert("Carrinho vazio!");
        document.getElementById('msg-pix').innerText = "Gerando QR Code Pix...";
        
        const paymentData = {
            transaction_amount: total,
            description: "Pedido Totem",
            payment_method_id: "pix",
            payer: { email: "totem@loja.com" }
        };

        try {
            const response = await fetch("https://api.mercadopago.com/v1/payments", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${ACCESS_TOKEN}`
                },
                body: JSON.stringify(paymentData)
            });

            const data = await response.json();
            
            if(data.point_of_interaction) {
                const qrCodeBase64 = data.point_of_interaction.transaction_data.qr_code_base64;
                const copiaCola = data.point_of_interaction.transaction_data.qr_code;
                
                document.getElementById('qrcode-img').src = `data:image/png;base64,${qrCodeBase64}`;
                document.getElementById('qrcode-img').style.display = "block";
                document.getElementById('msg-pix').innerText = "Escaneie para pagar:";
                document.getElementById('copia-e-cola').innerText = copiaCola;
            }
        } catch (error) {
            console.error(error);
            alert("Erro ao gerar Pix. Verifique seu Access Token.");
        }
    }
</script>

</body>
</html>
